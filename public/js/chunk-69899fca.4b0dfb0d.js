(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69899fca"],{1702:function(e,r,t){"use strict";t.r(r);var a=t("7a23"),n=function(e){return Object(a["N"])("data-v-91554bc0"),e=e(),Object(a["L"])(),e},s={class:"updata"},o=n((function(){return Object(a["n"])("h2",null,"修改用户名",-1)})),u=n((function(){return Object(a["n"])("h2",null,"修改密码",-1)})),c=Object(a["q"])(),l=n((function(){return Object(a["n"])("h2",null,"头像上传",-1)}));function d(e,r,t,n,d,b){var i=Object(a["T"])("UpdataName"),p=Object(a["T"])("UpdataPass"),m=Object(a["T"])("UpdataPhtoto");return Object(a["K"])(),Object(a["m"])("div",s,[Object(a["n"])("article",null,[o,Object(a["r"])(i)]),Object(a["n"])("article",null,[u,Object(a["r"])(p)]),c,Object(a["n"])("article",null,[l,Object(a["r"])(m)])])}var b=Object(a["q"])("立即修改");function i(e,r,t,n,s,o){var u=Object(a["T"])("el-form-item"),c=Object(a["T"])("el-input"),l=Object(a["T"])("el-button"),d=Object(a["T"])("el-form");return Object(a["K"])(),Object(a["k"])(d,{ref:"userFrom",model:s.userFrom,"label-width":"100px",rules:s.rules},{default:Object(a["ib"])((function(){return[Object(a["r"])(u,{label:"当前用户名"},{default:Object(a["ib"])((function(){return[Object(a["n"])("span",null,Object(a["X"])(e.userInfo.user),1)]})),_:1}),Object(a["r"])(u,{label:"新的用户名",prop:"user"},{default:Object(a["ib"])((function(){return[Object(a["r"])(c,{modelValue:s.userFrom.user,"onUpdate:modelValue":r[0]||(r[0]=function(e){return s.userFrom.user=e})},null,8,["modelValue"])]})),_:1}),Object(a["r"])(u,null,{default:Object(a["ib"])((function(){return[Object(a["r"])(l,{type:"primary",onClick:o.onSubmit},{default:Object(a["ib"])((function(){return[b]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])}var p=t("1da1"),m=t("5530"),f=(t("96cf"),t("d9e2"),t("ac1f"),t("00b4"),t("5502")),O={name:"UpdataName",data:function(){var e=this;return{userFrom:{user:""},rules:{user:[{validator:function(r,t,a){t.length<2||t.length>8?a(new Error("请输入2-8位用户名")):/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(t)?t===e.userInfo.user?a(new Error("不能修改为原来的名称")):a():a(new Error("只允许汉字、字母、下划线"))}}]}}},computed:Object(m["a"])({},Object(f["c"])(["userInfo"])),methods:Object(m["a"])(Object(m["a"])({},Object(f["b"])(["updatauser"])),{},{onSubmit:function(){var e=this;this.$refs.userFrom.validate(function(){var r=Object(p["a"])(regeneratorRuntime.mark((function r(t){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=10;break}return r.next=3,e.$axios({method:"POST",url:"/person/user",data:{user:e.userFrom.user}});case 3:if(a=r.sent,n=a.data,!n.code){r.next=7;break}return r.abrupt("return",e.$message.error(n.message));case 7:console.log(111),e.$message.success(n.message),e.updatauser(n.data);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}})},j=t("6b0d"),w=t.n(j);const h=w()(O,[["render",i]]);var v=h,g=Object(a["q"])("立即修改");function U(e,r,t,n,s,o){var u=Object(a["T"])("el-input"),c=Object(a["T"])("el-form-item"),l=Object(a["T"])("el-button"),d=Object(a["T"])("el-form");return Object(a["K"])(),Object(a["k"])(d,{ref:"passFrom",model:s.passFrom,"label-width":"100px",rules:s.rules},{default:Object(a["ib"])((function(){return[Object(a["r"])(c,{label:"旧密码",prop:"oldpassword"},{default:Object(a["ib"])((function(){return[Object(a["r"])(u,{type:"password",modelValue:s.passFrom.oldpassword,"onUpdate:modelValue":r[0]||(r[0]=function(e){return s.passFrom.oldpassword=e})},null,8,["modelValue"])]})),_:1}),Object(a["r"])(c,{label:"新密码",prop:"newpassword"},{default:Object(a["ib"])((function(){return[Object(a["r"])(u,{type:"password",modelValue:s.passFrom.newpassword,"onUpdate:modelValue":r[1]||(r[1]=function(e){return s.passFrom.newpassword=e})},null,8,["modelValue"])]})),_:1}),Object(a["r"])(c,{label:"确认密码",prop:"newpassword2"},{default:Object(a["ib"])((function(){return[Object(a["r"])(u,{type:"password",modelValue:s.passFrom.newpassword2,"onUpdate:modelValue":r[2]||(r[2]=function(e){return s.passFrom.newpassword2=e})},null,8,["modelValue"])]})),_:1}),Object(a["r"])(c,null,{default:Object(a["ib"])((function(){return[Object(a["r"])(l,{type:"primary",onClick:o.onSubmit},{default:Object(a["ib"])((function(){return[g]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])}var F={name:"UpdataPass",data:function(){var e=this;return{passFrom:{oldpassword:"",newpassword:"",newpassword2:""},rules:{oldpassword:[{validator:function(e,r,t){r.length<6||r.length>18?t(new Error("请输入6-18位字符")):(/^[a-zA-Z]\w{5,17}$/.test(r)||t(new Error("以字母开头,只能包含字符、数字和下划线")),t())}}],newpassword:[{validator:function(e,r,t){r.length<6||r.length>18?t(new Error("请输入6-18位字符")):(/^[a-zA-Z]\w{5,17}$/.test(r)||t(new Error("以字母开头,只能包含字符、数字和下划线")),t())}}],newpassword2:[{validator:function(r,t,a){e.passFrom.newpassword===t?a():a(new Error("不一致 "))}}]}}},methods:Object(m["a"])(Object(m["a"])({},Object(f["b"])(["cleardatauser"])),{},{onSubmit:function(){var e=this;this.$refs.passFrom.validate(function(){var r=Object(p["a"])(regeneratorRuntime.mark((function r(t){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=12;break}return r.next=3,e.$axios({method:"POST",url:"/person/pass",data:{oldpassword:e.passFrom.oldpassword,newpassword:e.passFrom.newpassword}});case 3:if(a=r.sent,n=a.data,!n.code){r.next=7;break}return r.abrupt("return",e.$message.error(n.message));case 7:e.$message.success(n.message),e.cleardatauser(),e.$router.push("/Home"),r.next=13;break;case 12:return r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}})};const k=w()(F,[["render",U]]);var _=k,$=["src"],T={key:1,class:"el-icon-plus avatar-uploader-icon"};function x(e,r,t,n,s,o){var u=Object(a["T"])("el-upload");return Object(a["K"])(),Object(a["k"])(u,{class:"avatar-uploader",action:e.baseUrl+"/person/phtoto","show-file-list":!1,"with-credentials":!0,"on-success":o.handleAvatarSuccess,"before-upload":o.beforeAvatarUpload},{default:Object(a["ib"])((function(){return[s.imageUrl?(Object(a["K"])(),Object(a["m"])("img",{key:0,src:s.imageUrl,class:"avatar"},null,8,$)):(Object(a["K"])(),Object(a["m"])("i",T))]})),_:1},8,["action","on-success","before-upload"])}t("d3b7"),t("3ca3"),t("ddb0"),t("2b3db"),t("9861");var y={name:"UpdataPhtoto",data:function(){return{imageUrl:""}},methods:Object(m["a"])(Object(m["a"])({},Object(f["b"])(["updatauser"])),{},{beforeAvatarUpload:function(e){var r="image/jpeg"===e.type,t=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&t},handleAvatarSuccess:function(e,r){if(e.code)return this.$message.error(e.message);this.imageUrl=URL.createObjectURL(r.raw),this.updatauser(e.data)}})};t("28d7");const V=w()(y,[["render",x],["__scopeId","data-v-728b6784"]]);var P=V,E={name:"UpdataUser",components:{UpdataName:v,UpdataPass:_,UpdataPhtoto:P}};t("ebd3");const S=w()(E,[["render",d],["__scopeId","data-v-91554bc0"]]);r["default"]=S},"28d7":function(e,r,t){"use strict";t("59b3")},"59b3":function(e,r,t){},"7ce8":function(e,r,t){},ebd3:function(e,r,t){"use strict";t("7ce8")}}]);
//# sourceMappingURL=chunk-69899fca.4b0dfb0d.js.map